<ion-content scroll-assist="true">
  <div class="container">
    <ion-grid>
      <ion-row>
        <ion-col sizeXs="12" sizeLg="6">
          <ion-row>
            <ion-col>
              <h2>Wijzig je profiel</h2>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col sizeXs="12" sizeSm="6" sizeMd="4">
              <ion-icon name="create-outline" class="float-right" (click)="openFilePicker()"></ion-icon>
              <ng-container *ngIf="profileImageUrl$ !== null && profileImageUrl$ !== ''">
                <img alt="profielfoto" class="profielfoto" [src]="profileImageUrl$" />
              </ng-container>  
              <ng-container *ngIf="profileImageUrl$ === null && authService?.currentUser?.value?.photoURL !== null && authService?.currentUser?.value?.photoURL !== ''">
                <img alt="profielfoto" [src]="authService.currentUser.value?.photoURL" />
              </ng-container>              
                <ng-container *ngIf="!(profileImageUrl$) && !authService?.currentUser?.value?.photoURL && gebruiker !== null">
                  <div class="avatar">
                    {{ gebruiker.voornaam.slice(0,1).toUpperCase() }}{{ gebruiker.achternaam.slice(0,1).toUpperCase() }}
                  </div>
                </ng-container>              
              
              <input style="display: none;" type="file" accept="image/*" (change)="uploadImageFromWeb($event)" id="btn_file">
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <form #form="ngForm">
                <ion-list *ngIf="gebruiker">
                  <ion-item class="pb1">
                    <ion-label position="stacked">Voornaam</ion-label>
                    <ion-input type="text" name="voornaam" [(ngModel)]="gebruiker.voornaam" required
                      class="ion-text-end"></ion-input>
                  </ion-item>

                  <ion-item class="pb1">
                    <ion-label position="stacked">Achternaam</ion-label>
                    <ion-input type="text" name="achternaam" [(ngModel)]="gebruiker.achternaam" required
                      class="ion-text-end"></ion-input>
                  </ion-item>

                  <ion-item class="pb1">
                    <ion-label position="stacked">Email</ion-label>
                    <ion-input type="email" name="email" [(ngModel)]="gebruiker.email" required
                      class="ion-text-end"></ion-input>
                  </ion-item>
                  <ion-item>
                    <ion-label position="stacked">Geboortedatum</ion-label>
                    <ion-input type="text" name="geboortedatum"
                      value="{{ gebruiker.geboortedatum | date: 'dd.MM.yyyy' }}" id="date"
                      class="ion-text-end"></ion-input>
                    <ion-popover trigger="date" size="cover">
                      <ng-template>
                        <ion-datetime name="geboortedatum" presentation="date" [(ngModel)]="gebruiker.geboortedatum"
                          firstDayOfWeek="1"></ion-datetime>
                      </ng-template>
                    </ion-popover>
                  </ion-item>
                  <div class="end">
                    <ion-button type="submit" [disabled]="!form.valid" (click)="update()">Update</ion-button>
                  </div>
                </ion-list>
              </form>
            </ion-col>
          </ion-row>
          <ion-row *ngIf="gebruiker">
            <ion-col>
              <h2>Controleer je logins.</h2>
              <app-login-attempts [gebruiker]="gebruiker"></app-login-attempts>
            </ion-col>
          </ion-row>
        </ion-col>
        <ion-col *ngIf="gebruiker" sizeXs="12" sizeLg="6">
          <h2>Jouw top 10</h2>
          <ion-item class="pb1" *ngIf="gebruiker && gebruiker.verdachten?.length != 0" lines="none">
            <app-reorder [kandidatenIds]="gebruiker.verdachten"></app-reorder>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>